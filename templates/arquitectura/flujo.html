<!-- templates/arquitectura/flujo.html -->
{% extends "base.html" %}

{% block title %}Flujo | Explorador Django{% endblock %}
{% block h1 %}Flujo URL → View → Template{% endblock %}

{% block content %}
  <div class="card">
    <p><strong>Ruta:</strong> <code>{{ ruta }}</code></p>

    {# request.resolver_match existe cuando Django resolvió la URL contra urlpatterns #}
    {% if resolver_match %}
      <p><strong>View ejecutada:</strong> <code>{{ resolver_match.view_name }}</code></p>
      <p><strong>Namespace:</strong> <code>{{ resolver_match.namespace }}</code></p>
      <p><strong>App name:</strong> <code>{{ resolver_match.app_name }}</code></p>
    {% else %}
      <p class="muted">No hay resolver_match disponible.</p>
    {% endif %}
  </div>

  <div class="card">
    <h3 style="margin-top:0;">Pasos (para usar
      <code>{% templatetag openblock %} for {% templatetag closeblock %}</code>
    )</h3>

    <ol>
      {% for paso in pasos %}
        <li>{{ paso }}</li>
      {% endfor %}
    </ol>
  </div>

  {% if mostrar_extra %}
    <div class="card">
      <h3 style="margin-top:0;">Extra (para usar
        <code>{% templatetag openblock %} if {% templatetag closeblock %}</code>
      )</h3>
      <p class="muted">Este bloque aparece porque <code>mostrar_extra</code> es True.</p>
    </div>
  {% endif %}
{% endblock %}